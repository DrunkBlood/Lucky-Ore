package drunkblood.luckyore.util;

import drunkblood.luckyore.block.BlockLuckyOre;
import net.minecraft.core.BlockPos;
import net.minecraft.core.Vec3i;
import net.minecraft.util.RandomSource;
import net.minecraft.world.level.block.Blocks;
import net.minecraft.world.level.block.state.BlockState;


public class OreBlockPicker {

    public static BlockState chooseBlock(RandomSource random, int yPos, ReplacementPos replacePos, boolean lucky) {
        int[] oreDist = levelMap[yPos+64];
        if(yPos != oreDist[0]) throw new IllegalStateException();
        int sum = 0;
        for(int i = 1; i < oreDist.length; i++){
            sum += oreDist[i];
        }
        int roll = random.nextInt(sum);
        roll = lucky ? Math.max(roll, random.nextInt(sum)) : roll;
        sum = 0;
        int chosenOre = -1;
        for(int i = 1; i < oreDist.length; i++){
            int value = oreDist[i];
            if(value == 0) continue;
            sum += value;
            if(roll <= sum) {
                chosenOre = i;
                break;
            }
        }

        return switch (chosenOre){
            case 2 -> getCopper(replacePos.replacementType);
            case 3 -> getGold(replacePos.replacementType);
            case 4 -> getIron(replacePos.replacementType);
            case 5 -> getLapis(replacePos.replacementType);
            case 6 -> getRedstone(replacePos.replacementType);
            case 7 -> getDiamond(replacePos.replacementType);
            default -> getCoal(replacePos.replacementType); // 1 and -1
        };
    }


    private static BlockState getCoal(ReplacementType replacementType) {
        switch (replacementType) {
            case STONE -> {return Blocks.COAL_ORE.defaultBlockState();}
            case DEEPSLATE -> {return Blocks.DEEPSLATE_COAL_ORE.defaultBlockState();}
            default -> {return Blocks.COAL_ORE.defaultBlockState();}
        }
    }

    private static BlockState getIron(ReplacementType replacementType) {
        switch (replacementType) {
            case STONE -> {return Blocks.IRON_ORE.defaultBlockState();}
            case DEEPSLATE -> {return Blocks.DEEPSLATE_IRON_ORE.defaultBlockState();}
            default -> {return Blocks.IRON_ORE.defaultBlockState();}
        }
    }

    private static BlockState getCopper(ReplacementType replacementType) {
        switch (replacementType) {
            case STONE -> {return Blocks.COPPER_ORE.defaultBlockState();}
            case DEEPSLATE -> {return Blocks.DEEPSLATE_COPPER_ORE.defaultBlockState();}
            default -> {return Blocks.COPPER_ORE.defaultBlockState();}
        }
    }

    private static BlockState getGold(ReplacementType replacementType) {
        switch (replacementType) {
            case STONE -> {return Blocks.GOLD_ORE.defaultBlockState();}
            case DEEPSLATE -> {return Blocks.DEEPSLATE_GOLD_ORE.defaultBlockState();}
            default -> {return Blocks.GOLD_ORE.defaultBlockState();}
        }
    }

    private static BlockState getLapis(ReplacementType replacementType) {
        switch (replacementType) {
            case STONE -> {return Blocks.LAPIS_ORE.defaultBlockState();}
            case DEEPSLATE -> {return Blocks.DEEPSLATE_LAPIS_ORE.defaultBlockState();}
            default -> {return Blocks.LAPIS_ORE.defaultBlockState();}
        }
    }

    private static BlockState getDiamond(ReplacementType replacementType) {
        switch (replacementType) {
            case STONE -> {return Blocks.DIAMOND_ORE.defaultBlockState();}
            case DEEPSLATE -> {return Blocks.DEEPSLATE_DIAMOND_ORE.defaultBlockState();}
            default -> {return Blocks.DIAMOND_ORE.defaultBlockState();}
        }
    }

    private static BlockState getRedstone(ReplacementType replacementType) {
        switch (replacementType) {
            case STONE -> {return Blocks.REDSTONE_ORE.defaultBlockState();}
            case DEEPSLATE -> {return Blocks.DEEPSLATE_REDSTONE_ORE.defaultBlockState();}
            default -> {return Blocks.REDSTONE_ORE.defaultBlockState();}
        }
    }

    public enum ReplacementType{
        DEEPSLATE,
        STONE
    }

    public static class ReplacementPos extends BlockPos {

        private final ReplacementType replacementType;

        public ReplacementPos(Vec3i vec3, ReplacementType replacementType) {
            super(vec3);
            this.replacementType = replacementType;
        }
    }

    private static final int[][] levelMap = {{-64,0,0,1267,735,312,506,350},
    {-63,0,0,1283,735,312,506,371},
    {-62,0,0,1300,735,312,506,392},
    {-61,0,0,1317,735,312,506,412},
    {-60,0,0,1333,735,312,506,433},
    {-59,0,0,1350,735,312,506,453},
    {-58,0,0,1367,735,312,506,474},
    {-57,0,0,1383,735,312,506,495},
    {-56,0,0,1400,735,312,506,515},
    {-55,0,0,1417,735,312,506,536},
    {-54,0,0,1433,735,312,506,556},
    {-53,0,0,1450,735,312,506,577},
    {-52,0,0,1467,735,312,506,598},
    {-51,0,0,1483,735,312,506,618},
    {-50,0,0,1500,735,312,506,639},
    {-49,0,0,1517,735,312,506,659},
    {-48,0,0,1533,735,312,506,680},
    {-47,0,0,300,735,312,506,701},
    {-46,0,0,317,735,312,506,721},
    {-45,0,0,333,735,312,506,742},
    {-44,0,0,350,735,312,506,762},
    {-43,0,0,367,735,312,506,783},
    {-42,0,0,383,735,312,506,804},
    {-41,0,0,400,735,312,506,824},
    {-40,0,0,416,735,312,506,845},
    {-39,0,0,433,735,312,506,865},
    {-38,0,0,450,735,312,506,886},
    {-37,0,0,466,735,312,506,907},
    {-36,0,0,483,735,312,506,927},
    {-35,0,0,500,735,312,506,948},
    {-34,0,0,516,735,312,506,969},
    {-33,0,0,533,735,312,506,989},
    {-32,0,0,550,735,331,580,1010},
    {-31,0,0,566,735,349,653,1030},
    {-30,0,0,583,735,368,727,1051},
    {-29,0,0,600,735,386,800,1072},
    {-28,0,0,616,735,404,874,1092},
    {-27,0,0,633,735,423,947,1113},
    {-26,0,0,650,735,441,1021,1133},
    {-25,0,0,666,735,459,1094,1154},
    {-24,0,0,683,795,478,1167,1175},
    {-23,0,0,700,854,496,1241,1195},
    {-22,0,0,716,914,515,1314,1216},
    {-21,0,0,733,973,533,1388,1236},
    {-20,0,0,750,1033,551,1461,1257},
    {-19,0,0,766,1092,570,1535,1278},
    {-18,0,0,783,1152,588,1608,1298},
    {-17,0,0,800,1211,606,1682,1319},
    {-16,0,114,816,1271,625,1755,1339},
    {-15,0,227,800,1330,643,1829,1360},
    {-14,0,341,783,1390,661,1902,1381},
    {-13,0,454,766,1449,680,1976,1401},
    {-12,0,568,750,1509,698,2049,1422},
    {-11,0,682,733,1568,717,2122,1442},
    {-10,0,795,716,1628,735,2196,1463},
    {-9,0,909,700,1687,753,2269,1484},
    {-8,0,1022,683,1747,772,2343,1504},
    {-7,0,1136,666,1806,790,2416,1525},
    {-6,0,1250,650,1866,808,2490,1545},
    {-5,0,1363,633,1925,827,2563,1566},
    {-4,0,1477,616,1985,845,2637,1587},
    {-3,0,1591,600,2044,863,2710,1607},
    {-2,0,1704,583,2104,882,2784,1628},
    {-1,0,1818,566,2163,900,2857,1649},
    {0,21,1931,550,2223,919,2931,1669},
    {1,43,2045,533,2282,900,2857,1649},
    {2,64,2159,516,2341,882,2784,1628},
    {3,85,2272,500,2401,863,2710,1607},
    {4,106,2386,483,2460,845,2637,1587},
    {5,128,2499,466,2520,827,2563,1566},
    {6,149,2613,450,2579,808,2490,1545},
    {7,170,2727,433,2639,790,2416,1525},
    {8,191,2840,416,2698,772,2343,1504},
    {9,213,2954,400,2758,753,2269,1484},
    {10,234,3067,383,2817,735,2196,1463},
    {11,255,3181,367,2877,717,2122,1442},
    {12,276,3295,350,2936,698,2049,1422},
    {13,298,3408,333,2996,680,1976,1401},
    {14,319,3522,317,3055,661,1902,1381},
    {15,340,3636,300,3115,643,1829,1360},
    {16,361,3749,283,3174,625,1249,1339},
    {17,383,3863,267,3115,606,1175,1319},
    {18,404,3976,250,3055,588,1102,1298},
    {19,425,4090,233,2996,570,1028,1278},
    {20,446,4204,217,2936,551,955,1257},
    {21,468,4317,200,2877,533,882,1236},
    {22,489,4431,183,2817,515,808,1216},
    {23,510,4544,167,2758,496,735,1195},
    {24,531,4658,150,2698,478,661,1175},
    {25,553,4772,133,2639,459,588,1154},
    {26,574,4885,117,2579,441,514,1133},
    {27,595,4999,100,2520,423,441,1113},
    {28,616,5112,83,2460,404,367,1092},
    {29,638,5226,67,2401,386,294,1072},
    {30,659,5340,50,2341,368,220,1051},
    {31,680,5453,33,2282,349,147,1030},
    {32,701,5567,2249,2223,331,73,1010},
    {33,723,5680,2232,2163,312,0,989},
    {34,744,5794,2232,2104,312,0,969},
    {35,765,5908,2232,2044,312,0,948},
    {36,786,6021,2232,1985,312,0,927},
    {37,808,6135,2232,1925,312,0,907},
    {38,829,6249,2232,1866,312,0,886},
    {39,850,6362,2232,1806,312,0,865},
    {40,872,6476,2232,1747,312,0,845},
    {41,893,6589,2232,1687,312,0,824},
    {42,914,6703,2232,1628,312,0,804},
    {43,935,6817,2232,1568,312,0,783},
    {44,957,6930,2232,1509,312,0,762},
    {45,978,7044,2232,1449,312,0,742},
    {46,999,7157,2232,1390,312,0,721},
    {47,1020,7271,2232,1330,312,0,701},
    {48,1042,7385,2232,1271,312,0,680},
    {49,1063,7271,2232,1211,312,0,659},
    {50,1084,7157,2232,1152,312,0,639},
    {51,1105,7044,2232,1092,312,0,618},
    {52,1127,6930,2232,1033,312,0,598},
    {53,1148,6817,2232,973,312,0,577},
    {54,1169,6703,2232,914,312,0,556},
    {55,1190,6589,2232,854,312,0,536},
    {56,1212,6476,2232,795,312,0,515},
    {57,1233,6362,2232,735,312,0,495},
    {58,1254,6249,2232,735,312,0,474},
    {59,1275,6135,2232,735,312,0,453},
    {60,1297,6021,2232,735,312,0,433},
    {61,1318,5908,2232,735,312,0,412},
    {62,1339,5794,2232,735,312,0,392},
    {63,1360,5680,2232,735,312,0,371},
    {64,1382,5567,2232,735,312,0,350},
    {65,1403,5453,2232,735,0,0,330},
    {66,1424,5340,2232,735,0,0,309},
    {67,1445,5226,2232,735,0,0,288},
    {68,1467,5112,2232,735,0,0,268},
    {69,1488,4999,2232,735,0,0,247},
    {70,1509,4885,2232,735,0,0,227},
    {71,1530,4772,2232,735,0,0,206},
    {72,1552,4658,2232,735,0,0,185},
    {73,1573,4544,2232,0,0,0,165},
    {74,1594,4431,2232,0,0,0,144},
    {75,1615,4317,2232,0,0,0,124},
    {76,1637,4204,2232,0,0,0,103},
    {77,1658,4090,2232,0,0,0,82},
    {78,1679,3976,2232,0,0,0,62},
    {79,1700,3863,2232,0,0,0,41},
    {80,1722,3749,2232,38,0,0,21},
    {81,1743,3636,2232,77,0,0,0},
    {82,1764,3522,2232,115,0,0,0},
    {83,1786,3408,2232,154,0,0,0},
    {84,1807,3295,2232,192,0,0,0},
    {85,1828,3181,2232,231,0,0,0},
    {86,1849,3067,2232,269,0,0,0},
    {87,1871,2954,2232,308,0,0,0},
    {88,1892,2840,2232,346,0,0,0},
    {89,1913,2727,2232,384,0,0,0},
    {90,1934,2613,2232,423,0,0,0},
    {91,1956,2499,2232,461,0,0,0},
    {92,1977,2386,2232,500,0,0,0},
    {93,1998,2272,2232,538,0,0,0},
    {94,2019,2159,2232,577,0,0,0},
    {95,2041,2045,2232,615,0,0,0},
    {96,2062,1931,2232,654,0,0,0},
    {97,2041,1818,2232,692,0,0,0},
    {98,2019,1704,2232,730,0,0,0},
    {99,1998,1591,2232,769,0,0,0},
    {100,1977,1477,2232,807,0,0,0},
    {101,1956,1363,2232,846,0,0,0},
    {102,1934,1250,2232,884,0,0,0},
    {103,1913,1136,2232,923,0,0,0},
    {104,1892,1022,2232,961,0,0,0},
    {105,1871,909,2232,1000,0,0,0},
    {106,1849,795,2232,1038,0,0,0},
    {107,1828,682,2232,1077,0,0,0},
    {108,1807,568,2232,1115,0,0,0},
    {109,1786,454,2232,1153,0,0,0},
    {110,1764,341,2232,1192,0,0,0},
    {111,1743,227,2232,1230,0,0,0},
    {112,1722,114,2232,1269,0,0,0},
    {113,1700,0,2232,1307,0,0,0},
    {114,1679,0,2232,1346,0,0,0},
    {115,1658,0,2232,1384,0,0,0},
    {116,1637,0,2232,1423,0,0,0},
    {117,1615,0,2232,1461,0,0,0},
    {118,1594,0,2232,1499,0,0,0},
    {119,1573,0,2232,1538,0,0,0},
    {120,1552,0,2232,1576,0,0,0},
    {121,1530,0,2232,1615,0,0,0},
    {122,1509,0,2232,1653,0,0,0},
    {123,1488,0,2232,1692,0,0,0},
    {124,1467,0,2232,1730,0,0,0},
    {125,1445,0,2232,1769,0,0,0},
    {126,1424,0,2232,1807,0,0,0},
    {127,1403,0,2232,1845,0,0,0},
    {128,1382,0,2232,1884,0,0,0},
    {129,1360,0,2232,1922,0,0,0},
    {130,1339,0,2232,1961,0,0,0},
    {131,1318,0,2232,1999,0,0,0},
    {132,1297,0,2232,2038,0,0,0},
    {133,1275,0,2232,2076,0,0,0},
    {134,1254,0,2232,2115,0,0,0},
    {135,1233,0,2232,2153,0,0,0},
    {136,2851,0,2232,2191,0,0,0},
    {137,2830,0,2232,2230,0,0,0},
    {138,2808,0,2232,2268,0,0,0},
    {139,2787,0,2232,2307,0,0,0},
    {140,2766,0,2232,2345,0,0,0},
    {141,2745,0,2232,2384,0,0,0},
    {142,2723,0,2232,2422,0,0,0},
    {143,2702,0,2232,2461,0,0,0},
    {144,2681,0,2232,2499,0,0,0},
    {145,2660,0,2232,2537,0,0,0},
    {146,2638,0,2232,2576,0,0,0},
    {147,2617,0,2232,2614,0,0,0},
    {148,2596,0,2232,2653,0,0,0},
    {149,2575,0,2232,2691,0,0,0},
    {150,2553,0,2232,2730,0,0,0},
    {151,2532,0,2232,2768,0,0,0},
    {152,2511,0,2232,2807,0,0,0},
    {153,2490,0,2232,2845,0,0,0},
    {154,2468,0,2232,2884,0,0,0},
    {155,2447,0,2232,2922,0,0,0},
    {156,2426,0,2232,2960,0,0,0},
    {157,2405,0,2232,2999,0,0,0},
    {158,2383,0,2232,3037,0,0,0},
    {159,2362,0,2232,3076,0,0,0},
    {160,2341,0,2232,3114,0,0,0},
    {161,2320,0,2232,3153,0,0,0},
    {162,2298,0,2232,3191,0,0,0},
    {163,2277,0,2232,3230,0,0,0},
    {164,2256,0,2232,3268,0,0,0},
    {165,2235,0,2232,3306,0,0,0},
    {166,2213,0,2232,3345,0,0,0},
    {167,2192,0,2232,3383,0,0,0},
    {168,2171,0,2232,3422,0,0,0},
    {169,2149,0,2232,3460,0,0,0},
    {170,2128,0,2232,3499,0,0,0},
    {171,2107,0,2232,3537,0,0,0},
    {172,2086,0,2232,3576,0,0,0},
    {173,2064,0,2232,3614,0,0,0},
    {174,2043,0,2232,3652,0,0,0},
    {175,2022,0,2232,3691,0,0,0},
    {176,2001,0,2232,3729,0,0,0},
    {177,1979,0,2232,3768,0,0,0},
    {178,1958,0,2232,3806,0,0,0},
    {179,1937,0,2232,3845,0,0,0},
    {180,1916,0,2232,3883,0,0,0},
    {181,1894,0,2232,3922,0,0,0},
    {182,1873,0,2232,3960,0,0,0},
    {183,1852,0,2232,3998,0,0,0},
    {184,1831,0,2232,4037,0,0,0},
    {185,1809,0,2232,4075,0,0,0},
    {186,1788,0,2232,4114,0,0,0},
    {187,1767,0,2232,4152,0,0,0},
    {188,1746,0,2232,4191,0,0,0},
    {189,1724,0,2232,4229,0,0,0},
    {190,1703,0,2232,4268,0,0,0},
    {191,1682,0,2232,4306,0,0,0},
    {192,1661,0,2232,4344,0,0,0},
    {193,1639,0,2232,4383,0,0,0},
    {194,1639,0,2232,4421,0,0,0},
    {195,1639,0,2232,4460,0,0,0},
    {196,1639,0,2232,4498,0,0,0},
    {197,1639,0,2232,4537,0,0,0},
    {198,1639,0,2232,4575,0,0,0},
    {199,1639,0,2232,4614,0,0,0},
    {200,1639,0,2232,4652,0,0,0},
    {201,1639,0,2232,4691,0,0,0},
    {202,1639,0,2232,4729,0,0,0},
    {203,1639,0,2232,4767,0,0,0},
    {204,1639,0,2232,4806,0,0,0},
    {205,1639,0,2232,4844,0,0,0},
    {206,1639,0,2232,4883,0,0,0},
    {207,1639,0,2232,4921,0,0,0},
    {208,1639,0,2232,4960,0,0,0},
    {209,1639,0,2232,4998,0,0,0},
    {210,1639,0,2232,5037,0,0,0},
    {211,1639,0,2232,5075,0,0,0},
    {212,1639,0,2232,5113,0,0,0},
    {213,1639,0,2232,5152,0,0,0},
    {214,1639,0,2232,5190,0,0,0},
    {215,1639,0,2232,5229,0,0,0},
    {216,1639,0,2232,5267,0,0,0},
    {217,1639,0,2232,5306,0,0,0},
    {218,1639,0,2232,5344,0,0,0},
    {219,1639,0,2232,5383,0,0,0},
    {220,1639,0,2232,5421,0,0,0},
    {221,1639,0,2232,5459,0,0,0},
    {222,1639,0,2232,5498,0,0,0},
    {223,1639,0,2232,5536,0,0,0},
    {224,1639,0,2232,5575,0,0,0},
    {225,1639,0,2232,5613,0,0,0},
    {226,1639,0,2232,5652,0,0,0},
    {227,1639,0,2232,5690,0,0,0},
    {228,1639,0,2232,5729,0,0,0},
    {229,1639,0,2232,5767,0,0,0},
    {230,1639,0,2232,5805,0,0,0},
    {231,1639,0,2232,5844,0,0,0},
    {232,1639,0,2232,5882,0,0,0},
    {233,1639,0,2232,5844,0,0,0},
    {234,1639,0,2232,5805,0,0,0},
    {235,1639,0,2232,5767,0,0,0},
    {236,1639,0,2232,5729,0,0,0},
    {237,1639,0,2232,5690,0,0,0},
    {238,1639,0,2232,5652,0,0,0},
    {239,1639,0,2232,5613,0,0,0},
    {240,1639,0,2232,5575,0,0,0},
    {241,1639,0,2232,5536,0,0,0},
    {242,1639,0,2232,5498,0,0,0},
    {243,1639,0,2232,5459,0,0,0},
    {244,1639,0,2232,5421,0,0,0},
    {245,1639,0,2232,5383,0,0,0},
    {246,1639,0,2232,5344,0,0,0},
    {247,1639,0,2232,5306,0,0,0},
    {248,1639,0,2232,5267,0,0,0},
    {249,1639,0,2232,5229,0,0,0},
    {250,1639,0,2232,5190,0,0,0},
    {251,1639,0,2232,5152,0,0,0},
    {252,1639,0,2232,5113,0,0,0},
    {253,1639,0,2232,5075,0,0,0},
    {254,1639,0,2232,5037,0,0,0},
    {255,1639,0,2232,4998,0,0,0},
    {256,1639,0,2232,4960,0,0,0},
    {257,1639,0,0,4921,0,0,0},
    {258,1639,0,0,4883,0,0,0},
    {259,1639,0,0,4844,0,0,0},
    {260,1639,0,0,4806,0,0,0},
    {261,1639,0,0,4767,0,0,0},
    {262,1639,0,0,4729,0,0,0},
    {263,1639,0,0,4691,0,0,0},
    {264,1639,0,0,4652,0,0,0},
    {265,1639,0,0,4614,0,0,0},
    {266,1639,0,0,4575,0,0,0},
    {267,1639,0,0,4537,0,0,0},
    {268,1639,0,0,4498,0,0,0},
    {269,1639,0,0,4460,0,0,0},
    {270,1639,0,0,4421,0,0,0},
    {271,1639,0,0,4383,0,0,0},
    {272,1639,0,0,4344,0,0,0},
    {273,1639,0,0,4306,0,0,0},
    {274,1639,0,0,4268,0,0,0},
    {275,1639,0,0,4229,0,0,0},
    {276,1639,0,0,4191,0,0,0},
    {277,1639,0,0,4152,0,0,0},
    {278,1639,0,0,4114,0,0,0},
    {279,1639,0,0,4075,0,0,0},
    {280,1639,0,0,4037,0,0,0},
    {281,1639,0,0,3998,0,0,0},
    {282,1639,0,0,3960,0,0,0},
    {283,1639,0,0,3922,0,0,0},
    {284,1639,0,0,3883,0,0,0},
    {285,1639,0,0,3845,0,0,0},
    {286,1639,0,0,3806,0,0,0},
    {287,1639,0,0,3768,0,0,0},
    {288,1639,0,0,3729,0,0,0},
    {289,1639,0,0,3691,0,0,0},
    {290,1639,0,0,3652,0,0,0},
    {291,1639,0,0,3614,0,0,0},
    {292,1639,0,0,3576,0,0,0},
    {293,1639,0,0,3537,0,0,0},
    {294,1639,0,0,3499,0,0,0},
    {295,1639,0,0,3460,0,0,0},
    {296,1639,0,0,3422,0,0,0},
    {297,1639,0,0,3383,0,0,0},
    {298,1639,0,0,3345,0,0,0},
    {299,1639,0,0,3306,0,0,0},
    {300,1639,0,0,3268,0,0,0},
    {301,1639,0,0,3230,0,0,0},
    {302,1639,0,0,3191,0,0,0},
    {303,1639,0,0,3153,0,0,0},
    {304,1639,0,0,3114,0,0,0},
    {305,1639,0,0,3076,0,0,0},
    {306,1639,0,0,3037,0,0,0},
    {307,1639,0,0,2999,0,0,0},
    {308,1639,0,0,2960,0,0,0},
    {309,1639,0,0,2922,0,0,0},
    {310,1639,0,0,2884,0,0,0},
    {311,1639,0,0,2845,0,0,0},
    {312,1639,0,0,2807,0,0,0},
    {313,1639,0,0,2768,0,0,0},
    {314,1639,0,0,2730,0,0,0},
    {315,1639,0,0,2691,0,0,0},
    {316,1639,0,0,2653,0,0,0},
    {317,1639,0,0,2614,0,0,0},
    {318,1639,0,0,2576,0,0,0},
    {319,1639,0,0,2537,0,0,0}};


}
